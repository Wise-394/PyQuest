[gd_scene load_steps=33 format=3 uid="uid://cx2ljcqbkehra"]

[ext_resource type="Texture2D" uid="uid://dk7ynn0tos83i" path="res://assets/Treasure Hunters/The Crusty Crew/Sprites/Crabby/01-Idle/Idle 01.png" id="1_27us2"]
[ext_resource type="Script" uid="uid://rnig7bxkab7d" path="res://script/character/crab/crab.gd" id="1_admx7"]
[ext_resource type="Texture2D" uid="uid://dqbydspl4s1fp" path="res://assets/Treasure Hunters/The Crusty Crew/Sprites/Crabby/01-Idle/Idle 02.png" id="2_admx7"]
[ext_resource type="Texture2D" uid="uid://d2qrfs4r6vu0m" path="res://assets/Treasure Hunters/The Crusty Crew/Sprites/Crabby/08-Hit/Hit 01.png" id="2_oxgc6"]
[ext_resource type="Texture2D" uid="uid://sgjpv2dy1bo2" path="res://assets/Treasure Hunters/The Crusty Crew/Sprites/Crabby/01-Idle/Idle 03.png" id="3_8jhn6"]
[ext_resource type="Texture2D" uid="uid://bish4232lgbwe" path="res://assets/Treasure Hunters/The Crusty Crew/Sprites/Crabby/08-Hit/Hit 02.png" id="3_pajt7"]
[ext_resource type="Texture2D" uid="uid://chhxgt0cuardg" path="res://assets/Treasure Hunters/The Crusty Crew/Sprites/Crabby/01-Idle/Idle 04.png" id="4_f3puh"]
[ext_resource type="Texture2D" uid="uid://5i22brg0hgxk" path="res://assets/Treasure Hunters/The Crusty Crew/Sprites/Crabby/08-Hit/Hit 03.png" id="4_pudux"]
[ext_resource type="Texture2D" uid="uid://cnfwa63hsv1rb" path="res://assets/Treasure Hunters/The Crusty Crew/Sprites/Crabby/01-Idle/Idle 05.png" id="5_d6g0r"]
[ext_resource type="Texture2D" uid="uid://c4v62ld6avnin" path="res://assets/Treasure Hunters/The Crusty Crew/Sprites/Crabby/08-Hit/Hit 04.png" id="5_gctqi"]
[ext_resource type="Texture2D" uid="uid://3u53eh0wmmcj" path="res://assets/Treasure Hunters/The Crusty Crew/Sprites/Crabby/09-Dead Hit/Dead Hit 01.png" id="6_6m2du"]
[ext_resource type="Texture2D" uid="uid://c5vofih71f6ah" path="res://assets/Treasure Hunters/The Crusty Crew/Sprites/Crabby/01-Idle/Idle 06.png" id="6_86n2j"]
[ext_resource type="Texture2D" uid="uid://big1is7kn4f7m" path="res://assets/Treasure Hunters/The Crusty Crew/Sprites/Crabby/01-Idle/Idle 07.png" id="7_1gotc"]
[ext_resource type="Texture2D" uid="uid://bntwb6remf2oe" path="res://assets/Treasure Hunters/The Crusty Crew/Sprites/Crabby/09-Dead Hit/Dead Hit 02.png" id="7_maayw"]
[ext_resource type="Texture2D" uid="uid://bkgibg2ha33c6" path="res://assets/Treasure Hunters/The Crusty Crew/Sprites/Crabby/09-Dead Hit/Dead Hit 03.png" id="8_sueps"]
[ext_resource type="Texture2D" uid="uid://dby0v7gnag5b2" path="res://assets/Treasure Hunters/The Crusty Crew/Sprites/Crabby/01-Idle/Idle 08.png" id="8_ubkrn"]
[ext_resource type="Texture2D" uid="uid://dnr3sjrn02oqx" path="res://assets/Treasure Hunters/The Crusty Crew/Sprites/Crabby/01-Idle/Idle 09.png" id="9_dub4w"]
[ext_resource type="Texture2D" uid="uid://bwbak6c2wvq0a" path="res://assets/Treasure Hunters/The Crusty Crew/Sprites/Crabby/09-Dead Hit/Dead Hit 04.png" id="9_wqvsm"]
[ext_resource type="Texture2D" uid="uid://dobet34hwgbua" path="res://assets/Treasure Hunters/The Crusty Crew/Sprites/Crabby/02-Run/Run 01.png" id="10_oxgc6"]
[ext_resource type="Texture2D" uid="uid://dewjqt7g3000i" path="res://assets/Treasure Hunters/The Crusty Crew/Sprites/Crabby/02-Run/Run 02.png" id="11_pajt7"]
[ext_resource type="Texture2D" uid="uid://5wedtdyjcqq5" path="res://assets/Treasure Hunters/The Crusty Crew/Sprites/Crabby/02-Run/Run 03.png" id="12_pudux"]
[ext_resource type="Texture2D" uid="uid://vgrh0dqpdb4" path="res://assets/Treasure Hunters/The Crusty Crew/Sprites/Crabby/02-Run/Run 04.png" id="13_gctqi"]
[ext_resource type="Texture2D" uid="uid://8xr3iv0y5glr" path="res://assets/Treasure Hunters/The Crusty Crew/Sprites/Crabby/02-Run/Run 05.png" id="14_mlx33"]
[ext_resource type="Texture2D" uid="uid://rm85dl0ufnyf" path="res://assets/Treasure Hunters/The Crusty Crew/Sprites/Crabby/02-Run/Run 06.png" id="15_6m2du"]
[ext_resource type="Script" uid="uid://dwbl7tap1c6fd" path="res://script/character/state_machine.gd" id="17_f3puh"]
[ext_resource type="Script" uid="uid://ddecdfo2cun6a" path="res://script/character/crab/idle_state.gd" id="18_d6g0r"]
[ext_resource type="Script" uid="uid://cdktysp5le6qo" path="res://script/character/crab/move_state.gd" id="19_d6g0r"]
[ext_resource type="Script" uid="uid://cuwrc8c2tuosb" path="res://script/character/crab/damaged_state.gd" id="20_86n2j"]
[ext_resource type="Script" uid="uid://3qjmwva2v43v" path="res://script/character/crab/dead_state.gd" id="29_7lcgg"]

[sub_resource type="SpriteFrames" id="SpriteFrames_maayw"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("2_oxgc6")
}, {
"duration": 1.0,
"texture": ExtResource("3_pajt7")
}, {
"duration": 1.0,
"texture": ExtResource("4_pudux")
}, {
"duration": 1.0,
"texture": ExtResource("5_gctqi")
}],
"loop": false,
"name": &"damaged",
"speed": 10.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("6_6m2du")
}, {
"duration": 1.0,
"texture": ExtResource("7_maayw")
}, {
"duration": 1.0,
"texture": ExtResource("8_sueps")
}, {
"duration": 1.0,
"texture": ExtResource("9_wqvsm")
}],
"loop": false,
"name": &"dead",
"speed": 10.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("1_27us2")
}, {
"duration": 1.0,
"texture": ExtResource("2_admx7")
}, {
"duration": 1.0,
"texture": ExtResource("3_8jhn6")
}, {
"duration": 1.0,
"texture": ExtResource("4_f3puh")
}, {
"duration": 1.0,
"texture": ExtResource("5_d6g0r")
}, {
"duration": 1.0,
"texture": ExtResource("6_86n2j")
}, {
"duration": 1.0,
"texture": ExtResource("7_1gotc")
}, {
"duration": 1.0,
"texture": ExtResource("8_ubkrn")
}, {
"duration": 1.0,
"texture": ExtResource("9_dub4w")
}],
"loop": true,
"name": &"idle",
"speed": 10.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("10_oxgc6")
}, {
"duration": 1.0,
"texture": ExtResource("11_pajt7")
}, {
"duration": 1.0,
"texture": ExtResource("12_pudux")
}, {
"duration": 1.0,
"texture": ExtResource("13_gctqi")
}, {
"duration": 1.0,
"texture": ExtResource("14_mlx33")
}, {
"duration": 1.0,
"texture": ExtResource("15_6m2du")
}],
"loop": true,
"name": &"walk",
"speed": 10.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_f3puh"]
size = Vector2(42, 16)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_sueps"]
size = Vector2(22, 23)

[node name="Crab" type="CharacterBody2D" groups=["enemy"]]
collision_layer = 16
collision_mask = 3
script = ExtResource("1_admx7")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
sprite_frames = SubResource("SpriteFrames_maayw")
animation = &"damaged"
autoplay = "idle"
frame = 3
frame_progress = 1.0

[node name="HitBox" type="Area2D" parent="."]
collision_layer = 0
collision_mask = 2

[node name="Collision" type="CollisionShape2D" parent="HitBox"]
position = Vector2(2, -1)
shape = SubResource("RectangleShape2D_f3puh")

[node name="HurtBox" type="CollisionShape2D" parent="."]
position = Vector2(1, 1.5)
shape = SubResource("RectangleShape2D_sueps")

[node name="StateMachine" type="Node" parent="." node_paths=PackedStringArray("initial_state")]
script = ExtResource("17_f3puh")
initial_state = NodePath("IdleState")

[node name="IdleState" type="Node" parent="StateMachine"]
script = ExtResource("18_d6g0r")

[node name="Timer" type="Timer" parent="StateMachine/IdleState"]
wait_time = 0.5
autostart = true

[node name="MoveState" type="Node" parent="StateMachine"]
script = ExtResource("19_d6g0r")

[node name="Timer" type="Timer" parent="StateMachine/MoveState"]
autostart = true

[node name="DamagedState" type="Node" parent="StateMachine"]
script = ExtResource("20_86n2j")

[node name="DeadState" type="Node" parent="StateMachine"]
script = ExtResource("29_7lcgg")

[node name="RaycastLeft" type="RayCast2D" parent="."]
position = Vector2(-20, 8)
target_position = Vector2(0, 7)
collision_mask = 2

[node name="RaycastRight" type="RayCast2D" parent="."]
position = Vector2(24, 8)
target_position = Vector2(0, 7)
collision_mask = 2

[connection signal="timeout" from="StateMachine/IdleState/Timer" to="StateMachine/IdleState" method="_on_timer_timeout"]
[connection signal="timeout" from="StateMachine/MoveState/Timer" to="StateMachine/MoveState" method="_on_timer_timeout"]
